<!-- register.ejs -->
<!DOCTYPE html>
<html>

<head>
    <title>Register</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
    
    <div class="container mt-5">
        <h1> Driving School Mangement </h1>
        <h2>Register School</h2>
        <!-- <form id="registerForm" action="/api/register" method="POST"> -->
        <form id="registerForm">
            <div class="form-group">
                <label for="name">School Name</label>
                <input type="text" class="form-control" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <textarea class="form-control" id="address" name="address" rows="3" required></textarea>
            </div>
            <div class="form-group">
                <label for="school_mobile_number">School Mobile Number</label>
                <input type="text" class="form-control" id="school_mobile_number" name="school_mobile_number" required>
            </div>
            <div class="form-group">
                <label for="owner_name">Owner Name</label>
                <input type="text" class="form-control" id="owner_name" name="owner_name" required>
            </div>
            <div class="form-group">
                <label for="owner_email">Owner Email</label>
                <input type="email" class="form-control" id="owner_email" name="owner_email" required>
            </div>
            <div class="form-group">
                <label for="owner_mobile_number">Owner Mobile Number</label>
                <input type="text" class="form-control" id="owner_mobile_number" name="owner_mobile_number" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" id="password" name="password" required>
            </div>
            <button type="submit" class="btn btn-primary">Register</button>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function () {
            $('#registerForm').submit(function (event) {
                event.preventDefault(); // Prevent default form submission

                var form = $(this);
                // var url = form.attr('action');
                var url = '/api/register';
                var formData = form.serialize();

                $.ajax({
                    type: 'POST',
                    url: url,
                    data: formData,
                    success: function (response) {
                        // Registration successful, redirect to homepage
                        window.location.href = '/';

                        // TODO set local storage with school  json string format
                    },
                    error: function (xhr, status, error) {
                        // Registration failed, display error message
                        var errorMessage = 'Registration failed: ' + error;
                        console.error(errorMessage);
                        alert(errorMessage);
                    }
                });
            });
        });
    </script>
</body>

</html>
