<!DOCTYPE html>
<html>

<head>
  <title>Add a Student</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
  <%- include('_navigation') %>
  <!-- <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/add">Add</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/students">List</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/search">Search</a>
        </li>
      </ul>
    </div>
  </nav> -->


  <div class="container mt-4">
    <h1>Add a Student</h1>
    <form id="student-form">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" class="form-control" id="name" name="name" required>
      </div>
      <div class="form-group">
        <label for="mobileNumber">Mobile Number:</label>
        <input type="text" class="form-control" id="mobileNumber" name="mobileNumber" required>
      </div>
      <div class="form-group">
        <label for="joiningDate">Joining Date:</label>
        <input type="date" class="form-control" id="joiningDate" name="joiningDate" required>
      </div>
      <div class="form-group">
        <label for="applicationNumber">Application Number:</label>
        <input type="text" class="form-control" id="applicationNumber" name="applicationNumber" required>
      </div>
      <div class="form-group">
        <label for="amount">Amount:</label>
        <input type="number" class="form-control" id="amount" name="amount" required>
      </div>
      <div class="form-group">
        <label for="discount">Discount:</label>
        <input type="number" class="form-control" id="discount" name="discount" required>
      </div>
      <div class="form-group">
        <label for="amountPaid">Amount Paid:</label>
        <input type="number" class="form-control" id="amountPaid" name="amountPaid" required>
      </div>
      <div class="form-group">
        <label for="settleAmount">Settle Amount:</label>
        <input type="number" class="form-control" id="settleAmount" name="settleAmount" required>
      </div>
      <div class="form-group">
        <label for="course">Course:</label>
        <input type="text" class="form-control" id="course" name="course" required>
      </div>
      <div class="form-group">
        <label for="trainingDays">Training Days:</label>
        <input type="number" class="form-control" id="trainingDays" name="trainingDays" required>
      </div>
      <div class="form-group">
        <button type="submit" class="btn btn-primary btn-block">Submit</button>
      </div>
      <div class="form-group">
        <button type="button" class="btn btn-secondary btn-block" id="clear-button">Clear</button>
      </div>
    </form>
  </div>

  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <script>
    $(document).ready(function () {
      $('#student-form').submit(function (e) {
        e.preventDefault();

        var name = $('#name').val();
        var mobileNumber = $('#mobileNumber').val();
        var joiningDate = $('#joiningDate').val();
        var applicationNumber = $('#applicationNumber').val();
        var amount = $('#amount').val();
        var discount = $('#discount').val();
        var amountPaid = $('#amountPaid').val();
        var settleAmount = $('#settleAmount').val();
        var course = $('#course').val();
        var trainingDays = $('#trainingDays').val();

        $.ajax({
          url: '/api/students',
          method: 'POST',
          contentType: 'application/json',
          data: JSON.stringify({
            name: name,
            mobileNumber: mobileNumber,
            joiningDate: joiningDate,
            applicationNumber: applicationNumber,
            amount: amount,
            discount: discount,
            amountPaid: amountPaid,
            settleAmount: settleAmount,
            course: course,
            trainingDays: trainingDays
          }),
          success: function () {
            window.location.href = '/students';
          },
          error: function (error) {
            alert('Error: ' + error.responseJSON.error);
          }
        });
      });

      $('#clear-button').click(function () {
        $('#student-form')[0].reset();
      });
    });
  </script>
</body>

</html>